---
import SocialLink from './SocialLink.astro';
import type { SupportedLanguage } from '../types/i18n';

export interface FooterTranslations {
    copyrightText: string;
    cookiePolicyText: string;
    licensedUnder: string;
}

export const footerTranslations: Record<SupportedLanguage, FooterTranslations> = {
    en: {
        copyrightText: 'All content on this website by ',
        cookiePolicyText: '(Not a) Cookie Policy',
        licensedUnder: 'is licensed under',
    },
    it: {
        copyrightText: 'Tutto il contenuto di questo sito web di ',
        cookiePolicyText: '(Non è una) Cookie Policy',
        licensedUnder: 'è concesso in licenza',
    },
};

export function getFooterTranslations(language: SupportedLanguage): FooterTranslations {
    return footerTranslations[language];
}

interface Props {
    language: SupportedLanguage;
}

const { language } = Astro.props;

// Get translations for the current language
const t = getFooterTranslations(language);

const currentYear = new Date().getFullYear();
---

<footer class="container">
    <div class="footer-content">
        <div class="copyright">
            <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/" class="copyright-text">
                @ {currentYear}
                <span property="dct:title">{t.copyrightText}</span><a
                    rel="cc:attributionURL dct:creator"
                    property="cc:attributionName"
                    href="https://aleromano.com">Alessandro Romano</a
                >
                {t.licensedUnder}
                <a
                    href="https://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1"
                    target="_blank"
                    rel="license noopener noreferrer"
                    style="display:inline-block;">CC BY-SA 4.0</a
                >
            </p>
        </div>
        <p class="banner-link">
            <a href="#" onclick="if(typeof showNotACookieBanner === 'function') showNotACookieBanner(); return false;"
                >{t.cookiePolicyText}</a
            >
        </p>
        <div class="social-links">
            <SocialLink platform="github" />
            <SocialLink platform="x" />
            <SocialLink platform="linkedin" />
            <SocialLink platform="instagram" />
            <SocialLink platform="rss" />
        </div>
    </div>
</footer>

<style>
    footer {
        margin-top: auto;
        border-top: 1px solid var(--color-border);
        background-color: var(--color-bg);
        z-index: 100;
        position: relative;
    }

    .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-md);
        text-align: center;
    }

    .copyright {
        font-size: 0.9rem;
        color: var(--color-text);
    }

    .copyright-text {
        margin-bottom: 0 !important;
    }

    .banner-link {
        margin: 0;
        font-size: 0.85rem;
    }

    .banner-link a {
        color: var(--color-text-secondary);
        text-decoration: none;
        transition: color 0.2s ease;
    }

    .banner-link a:hover {
        color: var(--color-accent);
        text-decoration: underline;
    }

    .social-links {
        display: flex;
        gap: var(--space-sm);
        align-items: center;
    }

    @media (min-width: 636px) {
        .footer-content {
            flex-direction: row;
            justify-content: space-between;
        }
    }
</style>
