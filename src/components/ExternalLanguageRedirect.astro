---
import { getLanguageFromURL } from '../utils/i18n';
import type { SupportedLanguage } from '../types/i18n';

interface Props {
    targetLanguage: SupportedLanguage;
    externalUrl: string;
}

const { targetLanguage, externalUrl } = Astro.props;
const pathname = new URL(Astro.request.url).pathname;
const currentLang = getLanguageFromURL(pathname);

// If we're already on the target language, redirect to external URL
if (currentLang === targetLanguage) {
    return Astro.redirect(externalUrl);
}
---

<slot />
